Since we assume the text is long, we can take all possible characters that were xored with key[0], key[1] and so on. Then, we iterate on all possibilities from 0 to 255 on all of the characters that were xored with the same key, and store the keys that got high score (in case the key we check is the key really used, most of the characters we will get are valid ones). After storing all the keys that recieve high score, if there are not just one key per index, I try all the permutations that left and pick the one that got the highest plaintext_score.